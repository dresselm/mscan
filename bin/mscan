#!/usr/bin/env ruby

require 'pathname'
ENV['BUNDLE_GEMFILE'] ||= File.expand_path("../../Gemfile",
  Pathname.new(__FILE__).realpath)

require 'bundler/setup'

require 'mscan'
require 'optparse'

options = {
	:scan 		=> false,
	:analyze 	=> false,
	:report 	=> true
}
option_parser = OptionParser.new do |opts|
	# Switches
	opts.on('-s','--scan','Scan the source and target directories') do
		options[:scan] = true
	end

	opts.on('-a','--analyze','Analyze the most recent scan data') do
		options[:analyze] = true
	end

	opts.on('-v','--verbose') do
		options[:verbose] = true
	end
	# Flags
end
option_parser.parse!

Mscan::Scanner.scan(options) 			if options.fetch(:scan)
Mscan::Analyzer.analyze(options) 	if options.fetch(:analyze)
Mscan::Reporter.report(options) 	if options.fetch(:report)
